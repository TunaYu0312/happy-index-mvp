<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>å¼€å¿ƒæŒ‡æ•° MVP</title>
<style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fff8e7; }
    h1 { text-align: center; }
    .slider { width: 100%; }
    textarea { width: 100%; height: 80px; margin-top: 8px; }
    button { display: block; margin: 15px auto; padding: 10px 20px; background: orange; color: white; border: none; cursor: pointer; }
    .stats { background: white; padding: 10px; margin-top: 20px; border-radius: 6px; }
    .mood-list { margin-top: 10px; }
</style>
</head>
<body>

<h1>ğŸ˜Š ä»Šæ—¥å¼€å¿ƒæŒ‡æ•°ï¼ˆ0~10ï¼‰</h1>
<input type="range" min="0" max="10" value="6" class="slider" id="score">
<p>åˆ†æ•°ï¼š<span id="scoreValue">6</span></p>

<textarea id="moodText" placeholder="æè¿°ä¸€ä¸‹ä½ çš„å¿ƒæƒ…ï¼ˆ100å­—ä»¥å†…ï¼‰"></textarea>
<button onclick="submitMood()">æäº¤</button>

<div class="stats">
    <h3>ğŸ“Š ç»Ÿè®¡ç»“æœ</h3>
    <p>å½“å‰æ€»æäº¤äººæ•°ï¼š<span id="total">0</span></p>
    <p>ç›¸ä¼¼åˆ†æ•°äººæ•°ï¼š<span id="similar">0</span></p>
    <p>å¹³å‡åˆ†ï¼š<span id="average">0.0</span></p>
</div>

<div class="mood-list" id="moodList"></div>

<script>
let moods = [];
document.getElementById('score').oninput = function() {
    document.getElementById('scoreValue').textContent = this.value;
};

function submitMood() {
    const score = Number(document.getElementById('score').value);
    const text = document.getElementById('moodText').value.trim();
    if (!text) { alert('è¯·å¡«å†™å¿ƒæƒ…æè¿°'); return; }

    moods.push({ score, text });
    updateStats();
    document.getElementById('moodText').value = '';
}

function updateStats() {
    const total = moods.length;
    const avg = (moods.reduce((sum, m) => sum + m.score, 0) / total).toFixed(1);
    const latestScore = moods[moods.length - 1].score;
    const similarCount = moods.filter(m => Math.abs(m.score - latestScore) <= 1).length;

    document.getElementById('total').textContent = total;
    document.getElementById('average').textContent = avg;
    document.getElementById('similar').textContent = similarCount;

    document.getElementById('moodList').innerHTML =
        '<h3>ç›¸ä¼¼åˆ†æ•°çš„å¿ƒæƒ…åˆ†äº«ï¼š</h3>' +
        moods.filter(m => Math.abs(m.score - latestScore) <= 1)
             .map(m => `<p>â€¢ ${m.text}</p>`)
             .join('');
}
</script>
</body>
</html>
